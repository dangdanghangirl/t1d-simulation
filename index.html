<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1형 당뇨 일상 시뮬레이션</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Game Header -->
        <header class="game-header">
            <h1>1형 당뇨 일상 시뮬레이션</h1>
            <div class="header-stats">
                <div class="stat">
                    <span class="stat-label">현재 혈당</span>
                    <span class="stat-value" id="currentBG">120</span>
                    <span class="stat-unit">mg/dL</span>
                </div>
                <div class="stat">
                    <span class="stat-label">게임 시간</span>
                    <span class="stat-value" id="gameTime">08:00</span>
                </div>
                <div class="stat">
                    <span class="stat-label">에너지</span>
                    <span class="stat-value" id="energy">85</span>
                    <span class="stat-unit">%</span>
                </div>
            </div>
        </header>

        <!-- Main Game Area -->
        <main class="game-main">
            <!-- Welcome Screen -->
            <section id="welcomeScreen" class="screen active">
                <div class="card">
                    <div class="card__body">
                        <h2>1형 당뇨 일상 시뮬레이션에 오신 것을 환영합니다!</h2>
                        <p>이 게임은 1형 당뇨를 가진 사람들의 일상을 체험하고 이해할 수 있도록 도와줍니다.</p>
                        <div class="welcome-options">
                            <button class="btn btn--primary" onclick="startGame()">게임 시작</button>
                            <button class="btn btn--secondary" onclick="startTutorial()">튜토리얼</button>
                            <button class="btn btn--outline" onclick="loadGame()">게임 불러오기</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Character Setup -->
            <section id="characterSetup" class="screen">
                <div class="card">
                    <div class="card__body">
                        <h2>캐릭터 설정</h2>
                        <div class="form-group">
                            <label class="form-label">이름</label>
                            <input type="text" id="characterName" class="form-control" placeholder="캐릭터 이름을 입력하세요">
                        </div>
                        <div class="form-group">
                            <label class="form-label">나이</label>
                            <input type="number" id="characterAge" class="form-control" min="10" max="80" value="25">
                        </div>
                        <div class="form-group">
                            <label class="form-label">혈당 모니터링 방법</label>
                            <select id="monitoringMethod" class="form-control">
                                <option value="cgm">연속혈당측정기 (CGM)</option>
                                <option value="fingerstick">혈당 측정기</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">난이도</label>
                            <select id="difficulty" class="form-control">
                                <option value="beginner">초보자 (쉬운 혈당 관리)</option>
                                <option value="intermediate">중급자 (보통 변동성)</option>
                                <option value="advanced">고급자 (현실적 변동성)</option>
                            </select>
                        </div>
                        <button class="btn btn--primary" onclick="finishSetup()">설정 완료</button>
                    </div>
                </div>
            </section>

            <!-- Tutorial Screen -->
            <section id="tutorialScreen" class="screen">
                <div class="card">
                    <div class="card__body">
                        <h2>튜토리얼</h2>
                        <div id="tutorialContent">
                            <div class="tutorial-step active" data-step="1">
                                <h3>1형 당뇨란?</h3>
                                <p>1형 당뇨는 췌장에서 인슐린을 생산하지 못하는 자가면역질환입니다. 하루 종일 혈당을 관리해야 합니다.</p>
                            </div>
                            <div class="tutorial-step" data-step="2">
                                <h3>혈당 목표 범위</h3>
                                <p>목표 혈당 범위는 80-180 mg/dL입니다. 70 mg/dL 이하는 저혈당, 250 mg/dL 이상은 고혈당입니다.</p>
                            </div>
                            <div class="tutorial-step" data-step="3">
                                <h3>인슐린 관리</h3>
                                <p>지속형 인슐린은 하루 1-2회, 초속효성 인슐린은 식사 전에 주사합니다.</p>
                            </div>
                        </div>
                        <div class="tutorial-nav">
                            <button class="btn btn--secondary" onclick="prevTutorial()">이전</button>
                            <button class="btn btn--primary" onclick="nextTutorial()">다음</button>
                            <button class="btn btn--outline" onclick="skipTutorial()">건너뛰기</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Main Game Dashboard -->
            <section id="gameDashboard" class="screen">
                <div class="dashboard-grid">
                    <!-- Blood Glucose Panel -->
                    <div class="card dashboard-card">
                        <div class="card__body">
                            <h3>혈당 관리</h3>
                            <div class="bg-display">
                                <div class="bg-value" id="dashboardBG">120</div>
                                <div class="bg-status" id="bgStatus">정상</div>
                            </div>
                            <div class="bg-actions">
                                <button class="btn btn--primary btn--sm" onclick="checkBloodGlucose()">혈당 측정</button>
                                <button class="btn btn--secondary btn--sm" onclick="viewBGHistory()">기록 보기</button>
                            </div>
                        </div>
                    </div>

                    <!-- Insulin Panel -->
                    <div class="card dashboard-card">
                        <div class="card__body">
                            <h3>인슐린 관리</h3>
                            <div class="insulin-info">
                                <div class="insulin-item">
                                    <span>지속형:</span>
                                    <span id="longActingTime">18시간 전</span>
                                </div>
                                <div class="insulin-item">
                                    <span>초속효성:</span>
                                    <span id="rapidActingTime">2시간 전</span>
                                </div>
                            </div>
                            <div class="insulin-actions">
                                <button class="btn btn--primary btn--sm" onclick="injectInsulin('rapid')">초속효성 주사</button>
                                <button class="btn btn--secondary btn--sm" onclick="injectInsulin('long')">지속형 주사</button>
                            </div>
                        </div>
                    </div>

                    <!-- Food & Meals Panel -->
                    <div class="card dashboard-card">
                        <div class="card__body">
                            <h3>식사 관리</h3>
                            <div class="meal-info">
                                <div class="next-meal">
                                    <span>다음 식사:</span>
                                    <span id="nextMeal">점심 (12:00)</span>
                                </div>
                                <div class="carb-count">
                                    <span>오늘 탄수화물:</span>
                                    <span id="dailyCarbs">45g</span>
                                </div>
                            </div>
                            <div class="meal-actions">
                                <button class="btn btn--primary btn--sm" onclick="eatMeal()">식사하기</button>
                                <button class="btn btn--secondary btn--sm" onclick="viewFoodDiary()">식단 일기</button>
                            </div>
                        </div>
                    </div>

                    <!-- Activity Panel -->
                    <div class="card dashboard-card">
                        <div class="card__body">
                            <h3>활동 관리</h3>
                            <div class="activity-info">
                                <div class="activity-item">
                                    <span>오늘 활동:</span>
                                    <span id="dailyActivity">걷기 30분</span>
                                </div>
                                <div class="activity-item">
                                    <span>에너지:</span>
                                    <span id="activityEnergy">85%</span>
                                </div>
                            </div>
                            <div class="activity-actions">
                                <button class="btn btn--primary btn--sm" onclick="doActivity()">활동하기</button>
                                <button class="btn btn--secondary btn--sm" onclick="viewActivityLog()">활동 기록</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Time Control -->
                <div class="time-control">
                    <button class="btn btn--outline" onclick="pauseGame()">일시정지</button>
                    <button class="btn btn--secondary" onclick="saveGame()">저장</button>
                    <button class="btn btn--primary" onclick="advanceTime()">시간 진행</button>
                </div>
            </section>

            <!-- Action Modals -->
            <div id="actionModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeModal()">&times;</span>
                    <div id="modalContent"></div>
                </div>
            </div>
        </main>

        <!-- Game Footer -->
        <footer class="game-footer">
            <div class="footer-tips">
                <h4>💡 오늘의 팁</h4>
                <p id="dailyTip">혈당은 하루에 최소 4-7회 측정하는 것이 좋습니다</p>
            </div>
            <div class="footer-stats">
                <div class="stat-small">
                    <span>목표 범위 시간</span>
                    <span id="timeInRange">78%</span>
                </div>
                <div class="stat-small">
                    <span>관리 점수</span>
                    <span id="managementScore">85</span>
                </div>
            </div>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>